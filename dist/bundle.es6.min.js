(function(){'use strict';function g(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}}function l(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):{next:g(b)}}var n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,p="function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,d){b!=Array.prototype&&b!=Object.prototype&&(b[a]=d.value)};
function q(b,a){if(a){var d=n;b=b.split(".");for(var c=0;c<b.length-1;c++){var e=b[c];e in d||(d[e]={});d=d[e]}b=b[b.length-1];c=d[b];a=a(c);a!=c&&null!=a&&p(d,b,{configurable:!0,writable:!0,value:a})}}
q("Promise",function(b){function a(a){this.b=0;this.h=void 0;this.a=[];var b=this.c();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}}function d(){this.a=null}function c(b){return b instanceof a?b:new a(function(a){a(b)})}if(b)return b;d.prototype.b=function(a){if(null==this.a){this.a=[];var b=this;this.c(function(){b.h()})}this.a.push(a)};var e=n.setTimeout;d.prototype.c=function(a){e(a,0)};d.prototype.h=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;++b){var c=
a[b];a[b]=null;try{c()}catch(m){this.g(m)}}}this.a=null};d.prototype.g=function(a){this.c(function(){throw a;})};a.prototype.c=function(){function a(a){return function(h){c||(c=!0,a.call(b,h))}}var b=this,c=!1;return{resolve:a(this.v),reject:a(this.g)}};a.prototype.v=function(b){if(b===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof a)this.w(b);else{a:switch(typeof b){case "object":var c=null!=b;break a;case "function":c=!0;break a;default:c=!1}c?this.u(b):this.l(b)}};
a.prototype.u=function(a){var b=void 0;try{b=a.then}catch(k){this.g(k);return}"function"==typeof b?this.A(b,a):this.l(a)};a.prototype.g=function(a){this.m(2,a)};a.prototype.l=function(a){this.m(1,a)};a.prototype.m=function(a,b){if(0!=this.b)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.b);this.b=a;this.h=b;this.s()};a.prototype.s=function(){if(null!=this.a){for(var a=0;a<this.a.length;++a)f.b(this.a[a]);this.a=null}};var f=new d;a.prototype.w=function(a){var b=this.c();
a.i(b.resolve,b.reject)};a.prototype.A=function(a,b){var c=this.c();try{a.call(b,c.resolve,c.reject)}catch(m){c.reject(m)}};a.prototype.then=function(b,c){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(A){f(A)}}:b}var e,f,h=new a(function(a,b){e=a;f=b});this.i(d(b,e),d(c,f));return h};a.prototype.catch=function(a){return this.then(void 0,a)};a.prototype.i=function(a,b){function c(){switch(d.b){case 1:a(d.h);break;case 2:b(d.h);break;default:throw Error("Unexpected state: "+
d.b);}}var d=this;null==this.a?f.b(c):this.a.push(c)};a.resolve=c;a.reject=function(b){return new a(function(a,c){c(b)})};a.race=function(b){return new a(function(a,d){for(var e=l(b),f=e.next();!f.done;f=e.next())c(f.value).i(a,d)})};a.all=function(b){var d=l(b),e=d.next();return e.done?c([]):new a(function(a,b){function f(b){return function(c){h[b]=c;k--;0==k&&a(h)}}var h=[],k=0;do h.push(void 0),k++,c(e.value).i(f(h.length-1),b),e=d.next();while(!e.done)})};return a});
function r(b){function a(a){return b.next(a)}function d(a){return b.throw(a)}return new Promise(function(c,e){function f(b){b.done?c(b.value):Promise.resolve(b.value).then(a,d).then(f,e)}f(b.next())})}
var t=Array.isArray,u=Object.keys,v=Object.prototype.hasOwnProperty,x=function w(b,a){if(b===a)return!0;if(b&&a&&"object"==typeof b&&"object"==typeof a){var c=t(b),e=t(a);if(c&&e){var f=b.length;if(f!=a.length)return!1;for(c=f;0!==c--;)if(!w(b[c],a[c]))return!1;return!0}if(c!=e)return!1;c=b instanceof Date;e=a instanceof Date;if(c!=e)return!1;if(c&&e)return b.getTime()==a.getTime();c=b instanceof RegExp;e=a instanceof RegExp;if(c!=e)return!1;if(c&&e)return b.toString()==a.toString();e=u(b);f=e.length;
if(f!==u(a).length)return!1;for(c=f;0!==c--;)if(!v.call(a,e[c]))return!1;for(c=f;0!==c--;)if(f=e[c],!w(b[f],a[f]))return!1;return!0}return b!==b&&a!==a};function y(b,a,d){a="number"===typeof d?Array(d+1).join(" ")+a:a;b.a.push(a)}function z(b){return(b?b:"").split("\n").map((a)=>Array(7).join(" ")+a).join("\n")}
class B{constructor(){this.a=[]}start(){y(this,"TAP version 13")}label(b){y(this,"# "+b)}test(b){y(this,`${b.j?"ok":"not ok"} ${b.id} ${b.description}`)}error(b){y(this,"---",2);b instanceof Error?(y(this,`name: ${b.name}`,4),y(this,`message: ${b.message}`,4),y(this,`stack: |-\n${z(b.stack)}`,4)):y(this,`error: ${JSON.stringify(b)}`,4);y(this,"...",2)}flush(){console.log(this.a.join("\n"));this.a=[]}}function C(b,a,d){a&&++b.j;b.f&&b.f.test({description:d?d:"",id:++b.a,j:a})}
class D{constructor(b){this.a=this.o=this.j=0;this.b=[];this.f=b;this.context={B:(a,b,c)=>C(this,x(a,b),c),C:(a)=>C(this,!1,a),D:(a,b,c)=>C(this,!x(a,b),c),F:(a)=>C(this,!0,a),test:(a,b,c)=>this.test(a,b,c)}}test(b,a,d){this.b.push({description:b,G:()=>{const c=this;return r(function*(){c.f&&c.f.label(b);try{d&&"number"===typeof d.timeout?yield Promise.race([a(c.context),new Promise((b,a)=>{setTimeout(()=>a(Error("Timeout")),d.timeout)})]):yield a(c.context)}catch(e){++c.o,c.f&&c.f.error(e)}}())}})}}
var E=new D(new B);const F=(b,a)=>{E.test(b,a)};"undefined"!==typeof window&&(window.Typtap=D,window.Tap=B,window.test=F);}).call(this);
