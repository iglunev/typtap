(function(){'use strict';function h(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function k(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:h(a)}}var m="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,n="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};
function p(a,b){if(b){var d=m;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];e in d||(d[e]={});d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&n(d,a,{configurable:!0,writable:!0,value:b})}}
p("Promise",function(a){function b(a){this.b=0;this.g=void 0;this.a=[];var b=this.c();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}}function d(){this.a=null}function c(a){return a instanceof b?a:new b(function(b){b(a)})}if(a)return a;d.prototype.b=function(a){if(null==this.a){this.a=[];var b=this;this.c(function(){b.g()})}this.a.push(a)};var e=m.setTimeout;d.prototype.c=function(a){e(a,0)};d.prototype.g=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;++b){var c=
a[b];a[b]=null;try{c()}catch(q){this.f(q)}}}this.a=null};d.prototype.f=function(a){this.c(function(){throw a;})};b.prototype.c=function(){function a(a){return function(g){c||(c=!0,a.call(b,g))}}var b=this,c=!1;return{resolve:a(this.A),reject:a(this.f)}};b.prototype.A=function(a){if(a===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.B(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.w(a):this.h(a)}};
b.prototype.w=function(a){var b=void 0;try{b=a.then}catch(l){this.f(l);return}"function"==typeof b?this.C(b,a):this.h(a)};b.prototype.f=function(a){this.j(2,a)};b.prototype.h=function(a){this.j(1,a)};b.prototype.j=function(a,b){if(0!=this.b)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.b);this.b=a;this.g=b;this.m()};b.prototype.m=function(){if(null!=this.a){for(var a=0;a<this.a.length;++a)f.b(this.a[a]);this.a=null}};var f=new d;b.prototype.B=function(a){var b=this.c();
a.l(b.resolve,b.reject)};b.prototype.C=function(a,b){var c=this.c();try{a.call(b,c.resolve,c.reject)}catch(q){c.reject(q)}};b.prototype.then=function(a,c){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(I){f(I)}}:b}var e,f,g=new b(function(a,b){e=a;f=b});this.l(d(a,e),d(c,f));return g};b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.l=function(a,b){function c(){switch(d.b){case 1:a(d.g);break;case 2:b(d.g);break;default:throw Error("Unexpected state: "+
d.b);}}var d=this;null==this.a?f.b(c):this.a.push(c)};b.resolve=c;b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,d){for(var e=k(a),f=e.next();!f.done;f=e.next())c(f.value).l(b,d)})};b.all=function(a){var d=k(a),e=d.next();return e.done?c([]):new b(function(a,b){function f(b){return function(c){g[b]=c;l--;0==l&&a(g)}}var g=[],l=0;do g.push(void 0),l++,c(e.value).l(f(g.length-1),b),e=d.next();while(!e.done)})};return b});
function r(){r=function(){};m.Symbol||(m.Symbol=t)}var t=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function u(){r();var a=m.Symbol.iterator;a||(a=m.Symbol.iterator=m.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&n(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return v(h(this))}});u=function(){}}function v(a){u();a={next:a};a[m.Symbol.iterator]=function(){return this};return a}
function w(){this.f=!1;this.b=null;this.m=void 0;this.a=1;this.j=this.g=0;this.c=null}function x(a){if(a.f)throw new TypeError("Generator is already running");a.f=!0}w.prototype.h=function(a){this.m=a};function y(a,b){a.c={s:b,v:!0};a.a=a.g||a.j}w.prototype.return=function(a){this.c={return:a};this.a=this.j};function z(a,b){a.a=5;return{value:b}}function A(a){a.a=0;a.g=0}function B(a){a.g=0;var b=a.c.s;a.c=null;return b}function C(a){this.a=new w;this.b=a}
function D(a,b){x(a.a);var d=a.a.b;if(d)return E(a,"return"in d?d["return"]:function(a){return{value:a,done:!0}},b,a.a.return);a.a.return(b);return F(a)}function E(a,b,d,c){try{var e=b.call(a.a.b,d);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.a.f=!1,e;var f=e.value}catch(g){return a.a.b=null,y(a.a,g),F(a)}a.a.b=null;c.call(a.a,f);return F(a)}
function F(a){for(;a.a.a;)try{var b=a.b(a.a);if(b)return a.a.f=!1,{value:b.value,done:!1}}catch(d){a.a.m=void 0,y(a.a,d)}a.a.f=!1;if(a.a.c){b=a.a.c;a.a.c=null;if(b.v)throw b.s;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function G(a){this.next=function(b){x(a.a);a.a.b?b=E(a,a.a.b.next,b,a.a.h):(a.a.h(b),b=F(a));return b};this.throw=function(b){x(a.a);a.a.b?b=E(a,a.a.b["throw"],b,a.a.h):(y(a.a,b),b=F(a));return b};this.return=function(b){return D(a,b)};u();this[Symbol.iterator]=function(){return this}}function H(a){function b(b){return a.next(b)}function d(b){return a.throw(b)}return new Promise(function(c,e){function f(a){a.done?c(a.value):Promise.resolve(a.value).then(b,d).then(f,e)}f(a.next())})}
var J=Array.isArray,K=Object.keys,L=Object.prototype.hasOwnProperty,N=function M(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){var c=J(a),e=J(b);if(c&&e){var f=a.length;if(f!=b.length)return!1;for(c=f;0!==c--;)if(!M(a[c],b[c]))return!1;return!0}if(c!=e)return!1;c=a instanceof Date;e=b instanceof Date;if(c!=e)return!1;if(c&&e)return a.getTime()==b.getTime();c=a instanceof RegExp;e=b instanceof RegExp;if(c!=e)return!1;if(c&&e)return a.toString()==b.toString();e=K(a);f=e.length;
if(f!==K(b).length)return!1;for(c=f;0!==c--;)if(!L.call(b,e[c]))return!1;for(c=f;0!==c--;)if(f=e[c],!M(a[f],b[f]))return!1;return!0}return a!==a&&b!==b};function O(){this.a=[]}function P(a,b,d){b="number"===typeof d?Array(d+1).join(" ")+b:b;a.a.push(b)}O.prototype.start=function(){P(this,"TAP version 13")};O.prototype.label=function(a){P(this,"# "+a)};O.prototype.test=function(a){P(this,(a.o?"ok":"not ok")+" "+a.id+" "+a.description)};
O.prototype.error=function(a){P(this,"---",2);a instanceof Error?(P(this,"name: "+a.name,4),P(this,"message: "+a.message,4),P(this,"stack: |-\n"+Q(a.stack),4)):P(this,"error: "+JSON.stringify(a),4);P(this,"...",2)};O.prototype.flush=function(){console.log(this.a.join("\n"));this.a=[]};function Q(a){return(a?a:"").split("\n").map(function(a){return Array(7).join(" ")+a}).join("\n")}
function R(a){var b=this;this.a=this.u=this.o=0;this.b=[];this.i=a;this.context={D:function(a,c,e){return S(b,N(a,c),e)},F:function(a){return S(b,!1,a)},G:function(a,c,e){return S(b,!N(a,c),e)},H:function(a){return S(b,!0,a)},test:function(a,c,e){return b.test(a,c,e)}}}
R.prototype.test=function(a,b,d){var c=this;this.b.push({description:a,I:function(){var e;return H(new G(new C(function(f){if(1==f.a)return c.i&&c.i.label(a),f.g=2,d&&"number"===typeof d.timeout?z(f,Promise.race([b(c.context),new Promise(function(a,b){setTimeout(function(){return b(Error("Timeout"))},d.timeout)})])):z(f,b(c.context));if(2!=f.a)return A(f);e=B(f);++c.u;c.i&&c.i.error(e);f.a=0})))}})};function S(a,b,d){b&&++a.o;a.i&&a.i.test({description:d?d:"",id:++a.a,o:b})}var T=new R(new O);
function U(a,b){T.test(a,b)}"undefined"!==typeof window&&(window.Typtap=R,window.Tap=O,window.test=U);}).call(this);
